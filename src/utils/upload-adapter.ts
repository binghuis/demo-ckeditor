import ClassicEditor from "@ckeditor/ckeditor5-build-classic";

class CustomUploadAdapter {
  loader: any;
  constructor(loader: any) {
    this.loader = loader;
  }

  upload() {
    return this.loader.file.then(
      (file: File) =>
        new Promise((resolve, reject) => {
          // 在这里执行上传接口，并返回图片 URL 地址
          setTimeout(() => {
            resolve({
              default: `data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIREhUTEBAUERIQFRYVERIQEBYSEBcTFRIWFxUXFxMYHiggGB0lGxUWLTIhJSkrLi4uFx8zODMtNygtLisBCgoKDg0OGxAQGi0mICUtLS0tLS8tKy0rLS0tLS0tLS0yLS0tLS0tLSstKy0tLTAtLS0vLS8tLS0tLS0tLS0tLf/AABEIAOAA4AMBEQACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYCAwQHAf/EADkQAAIBAgIHBgUCBQUBAAAAAAABAgMRBCEFBhIxQVFxIjJhgZGhE0JSscHR8DNicpLhJHOCs8Ij/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAECAwQFBgf/xAAxEQEAAgECBAIJAwUBAAAAAAAAAQIDBBEFEiExQVETIjIzYXGBkaEGsdEUFSPB8OH/2gAMAwEAAhEDEQA/APaQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK5pbW+jRk4QTrTjk9lpQT5bed/JMOnp+F5csc1ukfn7OLC69RbtVoOEfqhPbt1i0iWfJwa0R6lt/wteFxMKkVOnJSjLc1u/fgQ5GSlqW5bRtLaFGnF4qFKLlN2S9W+SXFhfHjtkty1hBPWpXyovZ57aUvS35J5XQ/ts7e11+SawGOhWjtQfg08pJ8mhMNHLhtinazpIYgAAAAAAAAAAAAAAAAAAAAACK1oxTpYWrKLtKyimt625KN16ht6HHGTPWs9v46vLCXrwCe1R0y8PVUJP8A+VVpST3Rk8lL9fDoHO4jpIzY+avtR+YelEPLKTp/H/FqNJ9indR5N8ZfvkWiHd0eD0ePee8owluJPV3FOnWir9mp2Zefd9/uxLU1uKL4pnxhdijggAAAAAAAAAAAAAAAAAAAAAEZrNhnUwtWKzeztJeMGpf+Q2tFk9HnrafPb79HlRL2AACXo+C0u5YBVb9tR+G3x212b+lmIeWy6Xl1fJ4b7/RVyzrgG7BfxIW37cbf3IMeX2LfKXoZR5oAAAAAAAAAAAAAAAAAAHNpDGRowc5Z2ySW9t7kTDLhxTlvywqWJ09Xm8p7C4KCt77y20OzTRYqx1jdohpWut1afnJyXoxsyTpsUx7MJXAazSWVeKkvqirPzjufkRMNPNw+O+OVN01hFSrSUHenLtUmtzhLd6ZryIdzS5ZyY4m3eOk/NwhsAErorFv4cqXyuaqeai4v8ehMNPUYo9JGTx22dRLEASermG268Xwp9t+W73t6CWprcnJimPGV2KOCAAAAAAAAAAAAAAAAAACB1vpt04Nboy7Xmsn++ZNXQ4daOeY8duiqFnZAAHNjqG1HLfHNfkiWXDfllzYDRsqufdj9T49FxOTr+LYdL6vtW8v5ZsmetPilqehaS37UvFyt9jzeT9Qau0+rtH03/dqzqLsoaKhF3g2srWbujLp/1HnrP+SItH2lE57WjaWFWk47/wDB6rR6/Dq682OevjHjCImJapzUc20upuLRWZ7JDA6z0cNTtTpyq1JZzk+xDwSbu8unMrLVy8Oy5773naPu56+u2JfcjTgv6XJ+rdvYhlpwfBHeZn8NdLXPFJ5unJcnTt9mgvbhOnmOm8fVbdXdYYYpNbOxViruF7prnF8V9g4us0N9NO/es+KaDRAAAAAAAAAAAAAAAMK1JTi4yV4yVmgtW01mLQpel9EToO6vKm90uXhLky0S7mm1VcsbeP8A3ZGktsA24eltPwW85fFtf/SYd6+1PSP5VmUglY+e2tNpmZ7yoFUAGNSG0rPibGn1GTBkjJSesJidpVTG0pQm4yd2uL4rgz6LpNVXU4oy18fxLp47RNd4aDZXAAErqtVccXRa4y2X0kmn9w0+IUi2mvv5bvUyHkQAAAAAAAAAAAAAAAB8kr5NXT3p7gRO3ZXdL6Doq8o1IUX9NSSUPfNFol09PrMva0TPy7qtXrQg7OcHbjCSnH1RO7r0ra0b7S79HtOG0s028+mR4X9Q5pvquXwrEfnqx3iYnaXScFQAAAITWOn3JdYv7r8nrP01lmYyY/lLc0tu8IY9U2wABatR9DylUWImmqdO+xf5ptWuvBXefO3iHH4rqq1p6Gs9Z7/CF+IedAAAAAAAAAAAAAAAODTOlqeGht1M28oQXek/D9Q2NNpr6i/LX7qDpPWjE1m7T+FDhGk7es979l4EvR4OG4MUdY3n4/whJO7u83zeb9Q34iIjaAJWTQU70kvpbT9b/k8Jx/HNdXM+ExEx+znaiNrpA4jAAAAETp6nKWyoq9rt5pckvyet/TWGdr5PlDZ01orvMopYGfL3R6rZtemozjo6XFperGys56+CxaA0dgrr4zlKfKrZUb9Fv/5CYcvWajVbep2+Hf8A75LzFJLLJcLbreBVwJ336voQAAAAAAAAAAAAAAAea67YlzxUovdSUYxXWKk36y9kS9TwvHFdPEx4oEOiAAO7RON+FLPuyyfhyZyOL8P/AKvFvX2q9vj8GHNi546d1li01dO6e5rceCvSazy2jaXP7d30qgA04rExpx2pPouLfJG3o9Hl1WTkpH18IXpSbztCNpYn4na48VyPouk01NNhjFTwZb0mk7MzYVAAE9q1pOUZqlJ3hLKN/lfBdGRMOdrtNE19JXvHdayrjgAAAAAAAAAAAAAAFB190bKNX46V4VElJ8ppWV+qS9GS9FwjURbH6Ke8dvkqodgA3YXC1Kr2aUJTfKEW/XkFL5aY43vMQ7J6HnCWzVai1vjF7TV+De5P1GzBXV1vG9Ozuw0vhq0d3J5o0tXwzT6rrevXzjuwW9ad5dDxrS7t7eJxL/piu/q5PvG/+4ViiMq6cm+7FR69pmXD+m8NZ3yXmfw2o0sR3lG1qspu8m5Pmzu4NPjwV5cddobFaxWNoZ4StsSvweT6GaFcleaqZLNEAASmrmEc60ZW7NN7UnwvwXqJaetyRTFNfGV1KOEAAAAAAAAAAAAAAAYzgpJqSTTyaaumvFBMTMTvCHraq4STv8HZ/onKK9E7Bu14lqaxtzfs2UNWsJDdQi/63KftJtBW/ENRbvf/AE7MVVjQpSkoqKgsoxSSvuSsvGxLBjrbLkiJnuoVSbk25O7k22/F7yz0cVisbQxCXyTsm+RFp2jdW9+Ss28o3QCKVtzViW9gyxlx1vHjES+lmUAvGq+Go4rD2mrVKL2HKDtJx3wbW55ZZr5Ru8/rr5dNm9Wek9f5dk9VfprZfzQu/Zk7sMcS86t2H1XprvzlPwS2V+WRupfiN59mNk1QoRhHZhFRiuCIaF72vO9p3bAqAAAAAAAAAAAAAAAAAACD1tqWpRX1TV+iTf3sTDf4dXfJM+UKkWdoAwxFNuE7fLCUn0SMOonbFb5NDieTk0t5jy2+6MxeG2I0pWyq01JdU3GXvH3Kaf3Vfk2OBZufR1ifDo5jO7AErLqDidnEOHCrB/3Rd17bXqHJ4vj3wxbyn93oZDzQAAAAAAAAAAAAAAAAAAAAABDa10dqjdfJJN9HdflEw3dBbbLt5qeWdwAkYYW2CxNV/NDYj02ltP1t6GvqZ/xy4XGsu+OaR5Mq2iXW0bRlBXqUYuSS3uLk9pfZ+RGm91CvBNT6Hlie0qaZ3sQIT2pFJyxcWt0Izk+mzs/eSDncVtFdPMT47PSiHlgAAAAAAAAAAAAAAAAAAAPkpJJtuyWbb3JETMRG8iEraz0k7RjOa5qyXlfM4+TjWGs7VrM/FXnhnDTmHqpwm3BSTTU1lZ/zK6Rmw8X0952mdp+P8prk2mJhXcdoudN3Sc6b7tSHai1423M6lbRaN4l6HDqseSvfaWWjdEVK0l2XGHzTkrK3hfey0mbV0xx33lPa0UlDA1YxVoxhFJeG3E1dT7qzzWstNsdrT3b9V1/pKH+2vyTp/d1Rp/dV+SH09qeqknUw8lCUs5QllBvmmu70tboZne0nFZxxFMsbx5+KHo6lYlu0nTguLc3L0SQb1uL4IjpvK4aB0JTwsGovanK23NqzdtyS4LwDiavV31Ft7dI8ISgagAAAAAAAAAAAAAAAAAAAHHpihKpRnGHeayXOzTt52NTXYrZNPate+yLdlAqXSyV3ybseMrEb+t0a9t4jo0/Hku9TfWLUvbeZfRVt7Nvup6S0e1V3aN0pKm70Z5cY74+cTJiz59Lbes7fDwZKZIn2ZW7RWnIVrRl2KnJvsv8Apf4PRaPiePP6tulvxLNW27Vri/8AR1ukf+yJuan3UsOq91Lbq7JRwdFyaSVKLbbskrcxitFcUWmemy2D3Vfk4sfrMllRjtfzzuo+Ud79jkanjMR6uGN/jPZeb+SNesOIv30vBQjY0J4tqZnfePsrzSktFaxOc1CrFdp2Uo5Zvddfob+j4va94pliOvjC0WWI7y4AAAAAAAAAAAAAAAAAAAACF0zoJVbzp2jU4r5ZdeT8Tka7hlc3r4+lvxKtq79lUr0JQlszi4yXB/vM81kxXx25bxtLE5quHUs+7LhKOT/yWpltWNu8eTHbFFuvaWNOs09meT+WS7sunJ+BNscTHPT/ANhFbzE7X7prSmlXUwFWE3ecfhq73yj8WOfVfodvS66c2CaX9qPzCdTP+GY/7u5K2kG6NKm3swpU4Jp5Xkoq7fnuOdq9XbNMY6+zH5+KaTy44ifJH/HlL+HHL6p5R8lvZreirT3k/SFPSWt7EfV9VGW+VR9IpJETem21a/dMUt42T2rmj3UqKbXYpu9+cluSN7heknLljJPsx+7PWFyPVsoAAAAAAAAAAAAAAAAAAAAABz4zBwqx2akdpcHxXR8DBn0+PPXlyRuiY3VTSmgqlK7hepDml2l1X5R5rV8My4etPWr+WOa7IarTUlZ7n+8jnUvNJ3hjtWLRtLn20k41X3LO/wBUU8n1utxscszMWx+PT5MPNERNb+H5ZQpOfaqLL5YcF4vmytrxjjlp9ZWis39a/wBIddODk0opyb3JK79DBWlrTy1jeWbZPaN1bk7SrvZX0J9p9Xw8vY7el4Pa3rZukeXj914p5rNSpqKUYpRiskluPQ0pWleWsbQyMywAAAAAAAAAAAAAAAAAAAAAAAAHHitF0ajvOmrviuy/NreamXQ6fL1tWN/sjlhw4rVfDzSWy4uLupKTbvbjtXut2XgYv7Zhik1p038fH8sd8Nbbb+DTQ1Wgn26spLlGOz73Zp4+B0ifXtM/LotyJnC4SnSVqcFFcbLN9XvZ1sOnx4Y2pXZaI2bzMkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD45JWTau9yvm+gH0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA04jDqe9tW6WzVnvXJsDTPR8Xuds1e6TukrW9ANk8HFu7bu2nw3ryAyw+GjDuq1/xf9QP/2Q==`,
            });
          }, 3000);
          // if error reject
        })
    );
  }

  abort() {
    // 执行请求取消逻辑，不需要封装 axios 实例
    // if (controller) {
    //   controller.abort();
    // }
  }
}

export default function UploadAdapter(editor: ClassicEditor) {
  editor.plugins.get("FileRepository").createUploadAdapter = (loader) => {
    return new CustomUploadAdapter(loader);
  };
}
